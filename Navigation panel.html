<!DOCTYPE html>
<html lang="en-GB" dir="ltr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>OAP • Forms Portal</title>

<script>
(function(){
  try{
    const root = document.documentElement;
    const KEY = 'pref-theme';
    const saved = localStorage.getItem(KEY);
    const initial = saved || (matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
    root.setAttribute('data-theme', initial);
  }catch(e){}
})();
</script>
<script src="nxs_config.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
// OAP Navigation panel — require authenticated user + sync theme with main page
(function(){
  const { createClient } = supabase;
  const sb = createClient(window.NXS_SUPABASE_URL, window.NXS_SUPABASE_ANON_KEY);
  const KEY = 'pref-theme';
  const root = document.documentElement;

  async function requireAuth(){
    try{
      const { data, error } = await sb.auth.getSession();
      if(error || !data || !data.session){
        window.location.href = 'Login.html';
        return;
      }
    }catch(e){
      window.location.href = 'Login.html';
      return;
    }
  }

  function bindThemeSync(){
    window.addEventListener('storage', function(e){
      if(e.key === KEY && e.newValue){
        try{
          root.setAttribute('data-theme', e.newValue);
        }catch(_){}
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function(){
    requireAuth();
    bindThemeSync();
  });
})();
</script>


<style>
:root{
  --bg:#F6F4F1;
  --card:#FAFAFA;
  --text:#0F1220;
  --muted:#6B7280;
  --brand:#22D3A6;
  --accent:#6D28D9;
  --ring:#E8E8E8;
  --shadow:0 10px 30px rgba(2,8,23,.12);
  --tile-radius:9px;
  --tile-gap:4px;
  --tile-pad:20px;
}

*{box-sizing:border-box}
html,body{height:100%;overflow:hidden}

html[data-theme="dark"]{
  --bg:#2A2A3C;
  --card:#323248;
  --text:#E6E7EB;
  --muted:#A0A6AE;
  --ring:#2A2A3C;
}

body{
  margin:0;
  background: var(--bg);
  color:var(--text);
  font:14px/1.5 "Segoe UI",Inter,Roboto,system-ui,-apple-system,sans-serif;
}

.container{max-width:1120px;margin:32px auto;padding:0 16px}

.header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:18px}
.brand{display:flex;gap:12px;align-items:center}
.logo{
  width:38px;height:38px;border-radius:12px;
  background:linear-gradient(135deg,var(--brand),var(--accent));
  box-shadow:var(--shadow);display:grid;place-items:center
}
.logo svg{width:22px;height:22px;fill:#fff}
.title{font-size:18px;font-weight:700}
.subtitle{color:var(--muted);font-size:12px}

.actions{display:flex;align-items:center;gap:10px}
.btn{
  border:none;border-radius:999px;padding:8px 14px;
  font-weight:600;cursor:pointer;height:36px;font-size:13px;
  display:inline-flex;align-items:center;gap:8px;
  text-decoration:none
}
.btn-ghost{background:var(--card);border:1px solid var(--ring);color:var(--text)}
.btn-ghost:hover{opacity:.95}
.btn-icon{padding:8px 10px}
.btn-icon svg{width:18px;height:18px;display:block;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}

.grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:var(--tile-gap);margin:18px 0 28px}
@media(max-width:1024px){.grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
@media(max-width:640px){.grid{grid-template-columns:1fr}}

.card{
  display:flex;flex-direction:column;
  background:var(--card);
  border:1px solid var(--ring);
  border-radius:var(--tile-radius);
  box-shadow:0 8px 22px rgba(2,8,23,.10);
  padding:var(--tile-pad);
  min-height:140px;
  text-align:left;
  transition:transform .15s,box-shadow .2s
}
.card:hover{transform:translateY(-2px);box-shadow:0 14px 34px rgba(2,8,23,.16)}
.card h3{margin:6px 0 6px;font-size:15px;line-height:1.25}
.card p{margin:0;color:var(--muted);font-size:12px}

.tile-icon{
  width:28px;height:28px;display:inline-grid;place-items:center;
  border-radius:8px;background:#F3F4F6;border:1px solid var(--ring);margin-bottom:10px
}
.tile-icon svg{width:16px;height:16px;stroke:#111827;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
html[data-theme="dark"] .tile-icon{background:#1A1A1A;border-color:#333}
html[data-theme="dark"] .tile-icon svg{stroke:#FFFFFF}

.actions .btn-icon{transition:transform 0.25s ease}
.actions .btn-icon:hover{transform:scale(1.18)}

.header{margin-top:80px !important;}
.container{margin-top:80px !important;}

html[data-theme="light"] .card h3,
html:not([data-theme="dark"]) .card h3{
  color:#000000;
}

html[data-theme="dark"] .card h3{
  color:#FFFFFF;
}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div class="brand">
      <div class="logo" aria-hidden="true">
        <svg viewBox="0 0 24 24"><path d="M10.18 9l-6.36 2.12a1 1 0 00.32 1.95l6.49-.33-2.62 6.16a1 1 0 001.72 1.02l4.38-5.2 4.86-.25a1 1 0 00.2-1.98l-4.1-1.09 2.13-5.34a1 1 0 00-1.76-.9l-4.09 5.24-2.37-.4z"/></svg>
      </div>
      <div>
        <div class="title">SGS Operations – Forms Portal</div>
        <div class="subtitle">Unified, responsive data-entry for TCC & Operations</div>
      </div>
    </div>

    <div class="actions">
      <a href="index.html" class="btn btn-ghost btn-icon" aria-label="Back">
        <svg viewBox="0 0 24 24">
          <path d="M15 18l-6-6 6-6"/>
          <path d="M21 12H9"/>
        </svg>
      </a>
    </div>
  </div>

  <div id="grid" class="grid"></div>
</div>

<script>
const ICON={
  pen:'<svg viewBox="0 0 24 24"><path d="M12 20h9"/><path d="M16.5 3.5a2.1 2.1 0 1 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/></svg>',
  check:'<svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M9 12l2 2 4-4"/></svg>',
  alert:'<svg viewBox="0 0 24 24"><path d="M10.3 2.7l-8 14A2 2 0 0 0 4 20h16a2 2 0 0 0 1.7-3.3l-8-14a2 2 0 0 0-3.4 0z"/><path d="M12 9v4M12 17h.01"/></svg>',
  activity:'<svg viewBox="0 0 24 24"><path d="M22 12h-4l-3 7-6-14-3 7H2"/></svg>',
  timer:'<svg viewBox="0 0 24 24"><path d="M10 2h4"/><circle cx="12" cy="13" r="8"/><path d="M12 9v4l2 2"/></svg>',
  thermo:'<svg viewBox="0 0 24 24"><path d="M14 14.76V5a2 2 0 1 0-4 0v9.76a4 4 0 1 0 4 0z"/></svg>',
  userX:'<svg viewBox="0 0 24 24"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 9l-6 6M16 9l6 6"/></svg>',
  clock:'<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"/><path d="M12 7v5l3 3"/></svg>',
  report:'<svg viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6"/></svg>'
};

const FORMS=[
  {id:'employee_master',title:'Employee Master',desc:'Master employee records (HR baseline).',icon:'pen'},
  {id:'employee_overtime',title:'Employee Overtime',desc:'Overtime & day-off assignments.',icon:'check'},
  {id:'tcc_flight_delay',title:'TCC Flight Delay',desc:'Delays related to TCC / FIC / LC.',icon:'alert'},
  {id:'operational_event',title:'Operational Event',desc:'Operational incidents & actions.',icon:'activity'},
  {id:'sgs_flight_delay',title:'SGS Flight Delay',desc:'Station-wide delays by code.',icon:'timer'},
  {id:'employee_sick_leave',title:'Employee sick leave',desc:'Sick leave periods per employee.',icon:'thermo'},
  {id:'employee_absence',title:'Employee Absence',desc:'Absence notifications.',icon:'userX'},
  {id:'employee_delay',title:'Employee Delay',desc:'Employee late arrivals.',icon:'clock'},
  {id:'shift_report',title:'Shift Report',desc:'Per-shift KPIs & staff presence.',icon:'report'}
];

const grid=document.getElementById('grid');
FORMS.forEach(f=>{
  const a=document.createElement('a');
  a.href='Forms file/' + f.id + '.html';
  a.className='card';
  a.innerHTML=`<span class="tile-icon">${ICON[f.icon]||ICON.report}</span><h3>${f.title}</h3><p>${f.desc||''}</p>`;
  grid.appendChild(a);
});
</script>
</body>
</html>